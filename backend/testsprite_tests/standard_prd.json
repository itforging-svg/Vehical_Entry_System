{
  "meta": {
    "project": "Vehical_Entry_System",
    "date": "2026-01-21",
    "prepared_by": "Generated by TestSprite"
  },
  "product_overview": "The Vehical_Entry_System is designed to digitize and automate the management of vehicles entering and exiting premises such as corporate offices, residential complexes, and parking lots. It replaces manual logbooks, enhances security through real-time tracking, and facilitates historical reporting and role-based access control.",
  "core_goals": [
    "Enable secure user authentication distinguishing Administrator and Security Guard roles.",
    "Digitally log vehicle entries with detailed driver and vehicle information.",
    "Allow security guards to efficiently manage vehicle exits and validate active vehicles.",
    "Provide administrators with powerful reporting, filtering, and data export capabilities.",
    "Ensure real-time dashboard updates showing current parked vehicles count.",
    "Maintain system performance with fast response times and reliability under concurrent usage.",
    "Support scalability for storing and querying large historical data records.",
    "Deliver a mobile-responsive user interface for ease of use by guards on handheld devices."
  ],
  "key_features": [
    "User login and role-based access using secure JWT authentication.",
    "Vehicle entry registration capturing vehicle and driver details such as license plate, vehicle type, driver name, contact, and purpose.",
    "Automatic timestamping of entry (check-in) and exit (check-out) times.",
    "Unique token or pass ID generation per vehicle visit for tracking.",
    "Search functionality for active vehicles by license plate or token ID for exit processing.",
    "Ability for guards to mark vehicles as exited, with automatic calculation of total duration.",
    "Dashboard displaying currently parked vehicle count updated in real time.",
    "Historical vehicle entry and exit log retrieval with date filtering and vehicle-specific history lookup.",
    "Administrative features for user management, system configuration, and exporting logs in CSV/Excel formats.",
    "Vehicle blacklist management to record and handle blacklisted vehicles with reasons."
  ],
  "user_flow_summary": [
    "Login via secure username and password, with role-based dashboard rendering (Admin or Guard).",
    "For Vehicle Entry: Guard clicks 'New Entry', fills in required vehicle and driver details, submits entry, and system timestamps entry and increments dashboard vehicle count.",
    "For Vehicle Exit: Guard searches vehicle by license or token, views active log, marks vehicle exit, system timestamps exit and calculates duration, moves record to history.",
    "Administrator reviews reports using date range filters and exports data as needed.",
    "Admins manage blacklisted vehicles by adding or viewing vehicles with blacklist reasons."
  ],
  "validation_criteria": [
    "System must successfully authenticate users with valid credentials and assign correct roles.",
    "Entries must capture all required fields and store accurate entry timestamps.",
    "Exit marking must update records with exit timestamps and calculate duration correctly.",
    "Dashboard must load within 2 seconds and reflect real-time vehicle counts.",
    "System must prevent data loss during concurrent entry/exit operations with consistent database transactions.",
    "UI must be mobile responsive and usable on handheld devices.",
    "Reports must be correctly filterable by dates and exportable to CSV/Excel formats.",
    "Blacklist API must allow adding and retrieving blacklisted vehicle data securely with proper authorization."
  ],
  "code_summary": {
    "tech_stack": [
      "Node.js",
      "Express.js",
      "PostgreSQL",
      "JWT",
      "bcryptjs"
    ],
    "features": [
      {
        "name": "Authentication",
        "description": "User login and authentication using JWT.",
        "files": [
          "backend/controllers/auth.controller.js",
          "backend/routes/auth.routes.js"
        ],
        "api_doc": {
          "openapi": "3.0.0",
          "info": {
            "title": "Auth API",
            "version": "1.0.0"
          },
          "paths": {
            "/api/auth/signin": {
              "post": {
                "summary": "User Sign In",
                "requestBody": {
                  "required": true,
                  "content": {
                    "application/json": {
                      "schema": {
                        "type": "object",
                        "properties": {
                          "username": {
                            "type": "string"
                          },
                          "password": {
                            "type": "string"
                          }
                        }
                      }
                    }
                  }
                },
                "responses": {
                  "200": {
                    "description": "Login successful"
                  },
                  "401": {
                    "description": "Invalid credentials"
                  }
                }
              }
            }
          }
        }
      },
      {
        "name": "Vehicle Entry Logs",
        "description": "Manage vehicle entry records, approvals, and history.",
        "files": [
          "backend/controllers/entry.controller.js",
          "backend/routes/entry.routes.js"
        ],
        "api_doc": {
          "openapi": "3.0.0",
          "info": {
            "title": "Entry Logs API",
            "version": "1.0.0"
          },
          "paths": {
            "/api/entry/": {
              "post": {
                "summary": "Create Entry Log",
                "requestBody": {
                  "required": true,
                  "content": {
                    "application/json": {
                      "schema": {
                        "type": "object",
                        "properties": {
                          "plant": {
                            "type": "string"
                          },
                          "vehicle_reg": {
                            "type": "string"
                          },
                          "driver_name": {
                            "type": "string"
                          },
                          "license_no": {
                            "type": "string"
                          },
                          "vehicle_type": {
                            "type": "string"
                          },
                          "puc_validity": {
                            "type": "string",
                            "format": "date"
                          },
                          "insurance_validity": {
                            "type": "string",
                            "format": "date"
                          },
                          "chassis_last_5": {
                            "type": "string"
                          },
                          "engine_last_5": {
                            "type": "string"
                          },
                          "purpose": {
                            "type": "string"
                          },
                          "material_details": {
                            "type": "string"
                          },
                          "transporter": {
                            "type": "string"
                          },
                          "aadhar_no": {
                            "type": "string"
                          },
                          "driver_mobile": {
                            "type": "string"
                          },
                          "challan_no": {
                            "type": "string"
                          },
                          "security_person_name": {
                            "type": "string"
                          },
                          "photos": {
                            "type": "array",
                            "items": {
                              "type": "string"
                            }
                          }
                        }
                      }
                    }
                  }
                },
                "responses": {
                  "201": {
                    "description": "Created"
                  }
                }
              }
            },
            "/api/entry/history/{identifier}": {
              "get": {
                "summary": "Find Driver History",
                "parameters": [
                  {
                    "name": "identifier",
                    "in": "path",
                    "required": true,
                    "schema": {
                      "type": "string"
                    }
                  }
                ],
                "responses": {
                  "200": {
                    "description": "Found history"
                  }
                }
              }
            },
            "/api/entry/today": {
              "get": {
                "summary": "Get Today's Logs",
                "security": [
                  {
                    "bearerAuth": []
                  }
                ],
                "responses": {
                  "200": {
                    "description": "List of logs"
                  }
                }
              }
            },
            "/api/entry/bydate": {
              "get": {
                "summary": "Get Logs by Date",
                "security": [
                  {
                    "bearerAuth": []
                  }
                ],
                "parameters": [
                  {
                    "name": "date",
                    "in": "query",
                    "schema": {
                      "type": "string",
                      "format": "date"
                    }
                  }
                ],
                "responses": {
                  "200": {
                    "description": "List of logs"
                  }
                }
              }
            },
            "/api/entry/{id}/exit": {
              "put": {
                "summary": "Register Exit",
                "security": [
                  {
                    "bearerAuth": []
                  }
                ],
                "parameters": [
                  {
                    "name": "id",
                    "in": "path",
                    "required": true,
                    "schema": {
                      "type": "integer"
                    }
                  }
                ],
                "responses": {
                  "200": {
                    "description": "Exit updated"
                  }
                }
              }
            },
            "/api/entry/{id}/approve": {
              "put": {
                "summary": "Approve Entry",
                "security": [
                  {
                    "bearerAuth": []
                  }
                ],
                "parameters": [
                  {
                    "name": "id",
                    "in": "path",
                    "required": true,
                    "schema": {
                      "type": "integer"
                    }
                  }
                ],
                "responses": {
                  "200": {
                    "description": "Approved"
                  }
                }
              }
            },
            "/api/entry/{id}/reject": {
              "put": {
                "summary": "Reject Entry",
                "security": [
                  {
                    "bearerAuth": []
                  }
                ],
                "parameters": [
                  {
                    "name": "id",
                    "in": "path",
                    "required": true,
                    "schema": {
                      "type": "integer"
                    }
                  }
                ],
                "requestBody": {
                  "content": {
                    "application/json": {
                      "schema": {
                        "type": "object",
                        "properties": {
                          "reason": {
                            "type": "string"
                          }
                        }
                      }
                    }
                  }
                },
                "responses": {
                  "200": {
                    "description": "Rejected"
                  }
                }
              }
            }
          }
        }
      },
      {
        "name": "Vehicle Blacklist",
        "description": "Manage blacklisted vehicles.",
        "files": [
          "backend/controllers/blacklist.controller.js",
          "backend/routes/blacklist.routes.js"
        ],
        "api_doc": {
          "openapi": "3.0.0",
          "info": {
            "title": "Blacklist API",
            "version": "1.0.0"
          },
          "paths": {
            "/api/blacklist": {
              "get": {
                "summary": "List Blacklist",
                "security": [
                  {
                    "bearerAuth": []
                  }
                ],
                "responses": {
                  "200": {
                    "description": "List of blacklisted vehicles"
                  }
                }
              },
              "post": {
                "summary": "Add to Blacklist",
                "security": [
                  {
                    "bearerAuth": []
                  }
                ],
                "requestBody": {
                  "required": true,
                  "content": {
                    "application/json": {
                      "schema": {
                        "type": "object",
                        "properties": {
                          "vehicle_no": {
                            "type": "string"
                          },
                          "reason": {
                            "type": "string"
                          }
                        }
                      }
                    }
                  }
                },
                "responses": {
                  "201": {
                    "description": "Added"
                  }
                }
              }
            }
          }
        }
      }
    ]
  }
}
